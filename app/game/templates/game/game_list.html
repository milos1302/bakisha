{% extends 'pages/base.html' %}

{% load in_group_filter %}
{% load is_org_admin_filter %}
{% load define_action %}

{% block content %}
    {% if request.user|has_group:'Administrators' and request.user|is_org_admin %}
        <a class="btn btn-outline-primary" href="{% url 'game-create' %}">Create New Game</a>
    {% endif %}
    <div class="mt-5">
        {% for game in game_list %}
            <div class="media mt-2 mb-2">
                {% if game.image %}
                    <img class="rounded list-img" src="{{ game.image.url }}"
                         alt="{{ game.name }} game image">
                {% endif %}
                <div class="media-body mt-2 ml-3">
                    <h2 class="account-heading">
                        <a href="{% url 'game-detail' game.slug %}">{{ game.name }}</a>
                    </h2>
                    <h6>Organiser: {{ game.organization.name }}</h6>
                    {% if game.created_by %}
                        {% define game.created_by.username as created_by %}
                    {% endif %}
                    <h6>Created By: {{ created_by|default:'Unknown' }}</h6>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock content %}
